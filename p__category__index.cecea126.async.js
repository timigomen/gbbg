(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[7],{Y2Pk:function(e,t,a){"use strict";var l=a("284h"),i=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(a("pVnL")),s=i(a("MVZn")),r=l(a("MebM")),c=a("MuoO"),d=i(a("LvDl")),o=i(a("dnEz")),u=i(a("UbMB")),p=a("Kvkj"),f=i(a("20nU")),m=i(a("lTs9")),h=f.default.gitalkOption,g=f.default.catsOption,v=f.default.themeColors,_=g.enableGitalk,E=g.qoute,b=g.list,P=u.default.bind(m.default),k=d.default.shuffle(v);class y extends r.PureComponent{constructor(e){super(e),this.filterPost=(e=>{this.props.dispatch({type:"app/filterPost",payload:{type:"milestone",filter:e.number}}).then(t=>{var a=t.slice(0,this.state.pageSize),l=Math.ceil(t.length/this.state.pageSize);this.setState({filterTitle:e.title,filterPost:t,currList:a,page:1,maxPage:l})}).catch(console.error)}),this.clearFilter=(()=>{this.setState({filterTitle:"",filterPost:[],currList:[],page:1,maxPage:1})}),this.prev=(()=>{var e=this.state,t=e.filterPost,a=e.page,l=e.pageSize,i=a-1,n=t.slice((i-1)*l,(a-1)*l);this.setState({currList:n,page:i})}),this.next=(()=>{var e=this.state,t=e.filterPost,a=e.page,l=e.pageSize,i=a+1,n=t.slice(a*l,i*l);this.setState({currList:n,page:i})}),this.renderGitalk=(()=>{_&&!this.state.renderGitalk&&(setTimeout(()=>{var e=new o.default((0,s.default)({},h,{title:"\u5206\u7c7b"}));e.render("gitalk")},100),this.setState({renderGitalk:!0}))}),this.state={showLoading:!0,renderGitalk:!1,filterTitle:"",filterPost:[],currList:[],pageSize:10,page:1,maxPage:1}}componentDidMount(){this.props.dispatch({type:"app/queryCats"})}componentWillReceiveProps(e){!e.loading&&e.cats.length&&this.setState({showLoading:!1})}componentWillUnmount(){this.props.dispatch({type:"app/updateState",payload:{cats:[]}})}render(e,t){var a=e.cats,l=e.loading,i=t.showLoading,s=t.filterTitle,c=t.currList,d=t.page,o=t.maxPage;return r.default.createElement("div",{class:P("container")},r.default.createElement(p.Transition,{visible:!l&&!i,animation:"drop",duration:600,onShow:this.renderGitalk},r.default.createElement("div",{class:P("body")},r.default.createElement(p.Quote,{text:E}),r.default.createElement("div",{class:P("content")},a.map((e,t)=>{var a=b.find(t=>t.name===e.title),l=a.text,i=a.img;return r.default.createElement("div",{key:t,class:P("cat"),onClick:()=>{this.filterPost(e)}},r.default.createElement("img",{class:P("bg"),src:i,alt:""}),r.default.createElement("div",{class:P("meta")},r.default.createElement("div",{class:P("header")},r.default.createElement("img",{class:P("avatar"),src:i,alt:""}),r.default.createElement("span",null,e.title," (",e.open_issues,")")),r.default.createElement("p",{class:P("desc")},l)))})),r.default.createElement(p.Transition,{visible:c.length,animation:"fade down",duration:600},r.default.createElement("div",null,r.default.createElement("div",null,r.default.createElement("span",null,"Category:"),r.default.createElement("button",{class:P("menu-btn"),onClick:this.clearFilter},s,r.default.createElement("i",{class:"icon"},"\ue806"))),r.default.createElement("div",{class:P("content")},c.map((e,t)=>{var a=k[t];return r.default.createElement(p.Archive,(0,n.default)({key:t,color:a},e))})),r.default.createElement(p.Pagination,{prev:this.prev,next:this.next,page:d,maxPage:o}))))),_&&r.default.createElement("div",{id:"gitalk"}),i&&r.default.createElement(p.Loading,{className:P("loading")}))}}var x=(0,c.connect)(e=>{var t=e.app,a=e.loading;return{cats:t.cats,loading:a.effects["app/queryCats"]}})(y);t.default=x},lTs9:function(e,t,a){e.exports={container:"container___zov-8",body:"body___1Kge_",content:"content___20nVu",cat:"cat___2v1Nx",avatar:"avatar___3gMi-",bg:"bg___3phYP",meta:"meta___2bs1C",header:"header___KsUoq",desc:"desc___39zdu","menu-btn":"menu-btn___2yJqT",loading:"loading___1tC7N"}}}]);